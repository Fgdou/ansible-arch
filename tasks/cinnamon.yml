---
- name: Directories
  file:
    path: "{{ item }}"
    state: directory
  loop:
    - ~/.local/share/cinnamon
    - ~/.local/share/cinnamon/applets
    - ~/.config/cinnamon
    - ~/.config/cinnamon/spices
    - ~/.config/cinnamon/spices/multicore-sys-monitor@ccadeptic23
    - ~/Pictures
    - ~/.themes
- name: Install cinnamon packages
  become: true
  become_user: aur_builder
  kewlfft.aur.aur:
    name: "{{ cinnamon_packages }}"
    use: yay
    state: present
- name: Enable lightdm
  become: true
  service:
    name: lightdm
    enabled: true
- name: Copy background
  copy:
    src: Wolf.jpg
    dest: ~/Pictures/background.jpg
- name: Install theme
  unarchive:
    dest: ~/.themes
    creates: ~/.themes/CBlack/
    remote_src: true
    src: https://github.com/Cloweling/cblack/releases/download/v3.0.0/Theme.CBlack.zip
- name: Applying style
  copy:
    src: cinnamon.css
    dest: ~/.themes/CBlack/cinnamon/cinnamon.css
- name: Install applets
  unarchive:
    creates: "~/.local/share/cinnamon/applets/{{ item }}"
    dest: ~/.local/share/cinnamon/applets/
    remote_src: true
    src: "https://cinnamon-spices.linuxmint.com/files/applets/{{ item }}.zip"
  loop: "{{ cinnamon_applets }}"
- name: System perf config
  copy:
    src: applet_perf.json
    dest: ~/.config/cinnamon/spices/multicore-sys-monitor@ccadeptic23/prefs.json
- name: create file configuration
  template:
    src: files/dconf.txt
    dest: /tmp/dconf.txt
- name: Import configuration
  shell:
    cmd: dconf load / < /tmp/dconf.txt
- name: lightdm background
  become: true
  template:
    src: files/lightdm_conf.conf
    dest: /etc/lightdm/lightdm-gtk-greeter.conf